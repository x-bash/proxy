# shellcheck shell=sh

xrc subcmd
xrc param

proxy(){

    param <<A
--help      -h      =FLAG
--version   -v      =FLAG
A

    if [ "$help" ]; then
        proxy_subcmd help
        return
    fi

    if [ "$version" ]; then
        proxy_subcmd version
        return
    fi

    proxy_subcmd ${1:+"$@"}
}

proxy_version(){
    printf "%s" v0
}

subcmd proxy "
Subcommand:
    :brew|homebrew          Setting the brew mirros
    :pip|python|py          Setting the pip mirrors
    :npm|nodejs|node        Setting the npm mirrors
    :yum                    Setting the yum mirrors
    :maven|java             Setting the maven mirrors
    :sdkman|sdk             Setting the sdkman mirrors
    :version|v              Print out the command version
    :go                     Setting the go mirrorss

"

eval "$(
    for i in brew npm pip yum maven sdkman go; do
        cat <<A

proxy_$i(){
    if xrc proxy/$i/v0; then
        proxy_$i \${1:+"\$@"}
    else
        echo "Autoloading failure." >&2
        return 1
    fi
}
A
    done
)"

